<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Well known traits</title>
        
        


        <!-- Custom HTML head -->
        


        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        
        <link rel="icon" href="../favicon.svg">
        
        
        <link rel="shortcut icon" href="../favicon.png">
        
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        
        <link rel="stylesheet" href="../css/print.css" media="print">
        

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        
        <link rel="stylesheet" href="../fonts/fonts.css">
        

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        
        <link rel="stylesheet" href="../mermaid.css">
        

        
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="../what_is_chalk.html"><strong aria-hidden="true">1.</strong> What is Chalk?</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../what_is_chalk/walkthrough.html"><strong aria-hidden="true">1.1.</strong> Walkthrough</a></li><li class="chapter-item expanded "><a href="../what_is_chalk/crates.html"><strong aria-hidden="true">1.2.</strong> Crates</a></li><li class="chapter-item expanded "><a href="../what_is_chalk/repl.html"><strong aria-hidden="true">1.3.</strong> REPL</a></li></ol></li><li class="chapter-item expanded "><a href="../contribution_guide.html"><strong aria-hidden="true">2.</strong> Contribution guide</a></li><li class="chapter-item expanded "><a href="../types.html"><strong aria-hidden="true">3.</strong> Representing and manipulating types</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../types/role_of_interner.html"><strong aria-hidden="true">3.1.</strong> The Interner</a></li><li class="chapter-item expanded "><a href="../types/rust_types.html"><strong aria-hidden="true">3.2.</strong> Rust types</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../types/rust_types/alias.html"><strong aria-hidden="true">3.2.1.</strong> Alias types</a></li><li class="chapter-item expanded "><a href="../types/rust_types/application_ty.html"><strong aria-hidden="true">3.2.2.</strong> Application types</a></li></ol></li><li class="chapter-item expanded "><a href="../types/rust_lifetimes.html"><strong aria-hidden="true">3.3.</strong> Rust lifetimes</a></li><li class="chapter-item expanded "><a href="../types/operations.html"><strong aria-hidden="true">3.4.</strong> Operations</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../types/operations/fold.html"><strong aria-hidden="true">3.4.1.</strong> TypeFoldable and the TypeFolder trait</a></li></ol></li></ol></li><li class="chapter-item expanded "><a href="../clauses.html"><strong aria-hidden="true">4.</strong> Lowering Rust IR to logic</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../clauses/goals_and_clauses.html"><strong aria-hidden="true">4.1.</strong> Goals and clauses</a></li><li class="chapter-item expanded "><a href="../clauses/type_equality.html"><strong aria-hidden="true">4.2.</strong> Type equality and unification</a></li><li class="chapter-item expanded "><a href="../clauses/implied_bounds.html"><strong aria-hidden="true">4.3.</strong> Implied bounds</a></li><li class="chapter-item expanded "><a href="../clauses/lowering_rules.html"><strong aria-hidden="true">4.4.</strong> Lowering rules</a></li><li class="chapter-item expanded "><a href="../clauses/opaque_types.html"><strong aria-hidden="true">4.5.</strong> Opaque types (impl Trait)</a></li><li class="chapter-item expanded "><a href="../clauses/well_known_traits.html" class="active"><strong aria-hidden="true">4.6.</strong> Well known traits</a></li><li class="chapter-item expanded "><a href="../clauses/wf.html"><strong aria-hidden="true">4.7.</strong> Well-formedness checking</a></li><li class="chapter-item expanded "><a href="../clauses/coherence.html"><strong aria-hidden="true">4.8.</strong> Coherence</a></li></ol></li><li class="chapter-item expanded "><a href="../canonical_queries.html"><strong aria-hidden="true">5.</strong> Canonical queries</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../canonical_queries/canonicalization.html"><strong aria-hidden="true">5.1.</strong> Canonicalization</a></li></ol></li><li class="chapter-item expanded "><a href="../engine.html"><strong aria-hidden="true">6.</strong> Chalk engine</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../engine/major_concepts.html"><strong aria-hidden="true">6.1.</strong> Major concepts</a></li><li class="chapter-item expanded "><a href="../engine/logic.html"><strong aria-hidden="true">6.2.</strong> Logic</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../engine/logic/coinduction.html"><strong aria-hidden="true">6.2.1.</strong> Coinduction</a></li></ol></li><li class="chapter-item expanded "><a href="../engine/slg.html"><strong aria-hidden="true">6.3.</strong> SLG Solver</a></li></ol></li><li class="chapter-item expanded "><a href="../recursive.html"><strong aria-hidden="true">7.</strong> Chalk recursive solver</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../recursive/stack.html"><strong aria-hidden="true">7.1.</strong> The stack</a></li><li class="chapter-item expanded "><a href="../recursive/inductive_cycles.html"><strong aria-hidden="true">7.2.</strong> Inductive cycles</a></li><li class="chapter-item expanded "><a href="../recursive/search_graph.html"><strong aria-hidden="true">7.3.</strong> The search graph and caching</a></li><li class="chapter-item expanded "><a href="../recursive/coinduction.html"><strong aria-hidden="true">7.4.</strong> Coinduction</a></li><li class="spacer"></li></ol></li><li class="chapter-item expanded "><a href="../glossary.html">Appendix A: Glossary and terminology</a></li><li class="chapter-item expanded affix "><a href="../bibliography.html">Appendix B: Bibliography</a></li><li class="chapter-item expanded affix "><a href="../todo.html">Appendix C: Incomplete chapters</a></li><li class="chapter-item expanded affix "><a href="../publishing.html">Appendix D: Publishing Chalk</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                        
                    </div>

                    <h1 class="menu-title"></h1>

                    <div class="right-buttons">
                        
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        
                        
                    </div>
                </div>

                
                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" name="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1><a class="header" href="#well-known-traits" id="well-known-traits">Well known traits</a></h1>
<p>For most traits, the question of whether some type T implements the trait is determined by 
looking solely at the impls that exist for the trait. But there are some well-known traits 
where we have &quot;built-in&quot; impls that are never expressly written in the compiler, they are 
built-in to the language itself. In some cases, these impls also encode complex conditions
that an ordinary impl cannot express. To address this, chalk has a notion of a <code>WellKnownTrait</code> 
-- basically, a trait which is inherent to the language and where we will generate custom logic.</p>
<p>As an example, consider the logic for <code>Sized</code> in regards to structs: A struct can have
at most one <code>!Sized</code> field, and it must be the last. And the last field isn't <code>Sized</code>, 
then neither is the struct itself. </p>
<p>Chalk has two main places that deal with well known trait logic:</p>
<ol>
<li><a href="https://github.com/rust-lang/chalk/blob/master/chalk-solve/src/clauses/builtin_traits.rs"><code>chalk-solve\clauses\builtin_traits</code></a>, which generates built-in implementations
for well-known traits.</li>
<li><a href="wf.html">well-formedness</a> checks, some of which need to know about well known traits.</li>
</ol>
<h1><a class="header" href="#auto-traits" id="auto-traits">Auto traits</a></h1>
<p>Auto traits, while not exactly well known traits, do also have special logic. 
The idea is that the type implements an auto trait if all data owned by that type implements it, 
with an ability to specifically opt-out or opt-in. Additionally, auto traits are <a href="../engine/logic/coinduction.html#coinduction-and-refinement-strands">coinductive</a>. 
Some common examples of auto traits are <code>Send</code> and <code>Sync</code>.</p>
<h1><a class="header" href="#current-state" id="current-state">Current state</a></h1>
<table><thead><tr><th>Type</th><th>Copy</th><th>Clone</th><th>Sized</th><th>Unsize</th><th>CoerceUnsized</th><th>Drop</th><th>FnOnce/FnMut/Fn</th><th>Unpin</th><th>Coroutine</th><th>auto traits</th></tr></thead><tbody>
<tr><td>tuple types</td><td>‚úÖ</td><td>‚úÖ</td><td>‚úÖ</td><td>‚úÖ</td><td>‚ö¨</td><td>‚ö¨</td><td>‚ö¨</td><td>‚ö¨</td><td>‚ö¨</td><td>‚úÖ</td></tr>
<tr><td>structs</td><td>‚ö¨</td><td>‚ö¨</td><td>‚úÖ</td><td>‚úÖ</td><td>‚ö¨</td><td>‚ö¨</td><td>‚ö¨</td><td>‚ö¨</td><td>‚ö¨</td><td>‚úÖ</td></tr>
<tr><td>scalar types</td><td>üìö</td><td>üìö</td><td>‚úÖ</td><td>‚ö¨</td><td>‚ö¨</td><td>‚ö¨</td><td>‚ö¨</td><td>‚ö¨</td><td>‚ö¨</td><td>‚úÖ</td></tr>
<tr><td>str</td><td>üìö</td><td>üìö</td><td>‚ö¨</td><td>‚ö¨</td><td>‚ö¨</td><td>‚ö¨</td><td>‚ö¨</td><td>‚ö¨</td><td>‚ö¨</td><td>‚úÖ</td></tr>
<tr><td>never type</td><td>üìö</td><td>üìö</td><td>‚úÖ</td><td>‚ö¨</td><td>‚ö¨</td><td>‚ö¨</td><td>‚ö¨</td><td>‚ö¨</td><td>‚ö¨</td><td>‚úÖ</td></tr>
<tr><td>trait objects</td><td>‚ö¨</td><td>‚ö¨</td><td>‚ö¨</td><td>‚úÖ</td><td>‚ö¨</td><td>‚ö¨</td><td>‚ö¨</td><td>‚ö¨</td><td>‚ö¨</td><td>‚ö¨</td></tr>
<tr><td>functions defs</td><td>‚úÖ</td><td>‚úÖ</td><td>‚úÖ</td><td>‚ö¨</td><td>‚ö¨</td><td>‚ö¨</td><td>‚ùå</td><td>‚ö¨</td><td>‚ö¨</td><td>‚úÖ</td></tr>
<tr><td>functions ptrs</td><td>‚úÖ</td><td>‚úÖ</td><td>‚úÖ</td><td>‚ö¨</td><td>‚ö¨</td><td>‚ö¨</td><td>‚úÖ</td><td>‚ö¨</td><td>‚ö¨</td><td>‚úÖ</td></tr>
<tr><td>raw ptrs</td><td>üìö</td><td>üìö</td><td>‚úÖ</td><td>‚ö¨</td><td>‚ö¨</td><td>‚ö¨</td><td>‚ö¨</td><td>‚ö¨</td><td>‚ö¨</td><td>‚úÖ</td></tr>
<tr><td>immutable refs</td><td>üìö</td><td>üìö</td><td>‚úÖ</td><td>‚ö¨</td><td>‚ö¨</td><td>‚ö¨</td><td>‚ö¨</td><td>‚ö¨</td><td>‚ö¨</td><td>‚úÖ</td></tr>
<tr><td>mutable refs</td><td>‚ö¨</td><td>‚ö¨</td><td>‚úÖ</td><td>‚ö¨</td><td>‚ö¨</td><td>‚ö¨</td><td>‚ö¨</td><td>‚ö¨</td><td>‚ö¨</td><td>‚úÖ</td></tr>
<tr><td>slices</td><td>‚ö¨</td><td>‚ö¨</td><td>‚ö¨</td><td>‚úÖ</td><td>‚ö¨</td><td>‚ö¨</td><td>‚ö¨</td><td>‚ö¨</td><td>‚ö¨</td><td>‚úÖ</td></tr>
<tr><td>arrays</td><td>‚úÖ</td><td>‚úÖ</td><td>‚úÖ</td><td>‚ùå</td><td>‚ö¨</td><td>‚ö¨</td><td>‚ö¨</td><td>‚ö¨</td><td>‚ö¨</td><td>‚úÖ</td></tr>
<tr><td>closures</td><td>‚úÖ</td><td>‚úÖ</td><td>‚úÖ</td><td>‚ö¨</td><td>‚ö¨</td><td>‚ö¨</td><td>‚úÖ</td><td>‚ö¨</td><td>‚ö¨</td><td>‚úÖ</td></tr>
<tr><td>coroutines</td><td>‚ö¨</td><td>‚ö¨</td><td>‚ùå</td><td>‚ö¨</td><td>‚ö¨</td><td>‚ö¨</td><td>‚ö¨</td><td>‚úÖ</td><td>‚ùå</td><td>‚úÖ</td></tr>
<tr><td>gen. witness</td><td>‚ö¨</td><td>‚ö¨</td><td>‚ö¨</td><td>‚ö¨</td><td>‚ö¨</td><td>‚ö¨</td><td>‚ö¨</td><td>‚ö¨</td><td>‚ö¨</td><td>‚ùå</td></tr>
<tr><td>opaque</td><td>‚ö¨</td><td>‚ö¨</td><td>‚ö¨</td><td>‚ö¨</td><td>‚ö¨</td><td>‚ö¨</td><td>‚ö¨</td><td>‚ö¨</td><td>‚ö¨</td><td>‚ùå</td></tr>
<tr><td>foreign</td><td>‚ö¨</td><td>‚ö¨</td><td>‚ö¨</td><td>‚ö¨</td><td>‚ö¨</td><td>‚ö¨</td><td>‚ö¨</td><td>‚ö¨</td><td>‚ö¨</td><td>‚ùå</td></tr>
<tr><td>-----------</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr>
<tr><td>well-formedness</td><td>‚úÖ</td><td>‚ö¨</td><td>‚úÖ</td><td>‚ö¨</td><td>‚úÖ</td><td>‚úÖ</td><td>‚ö¨</td><td>‚ö¨</td><td>‚ö¨</td><td>‚ö¨</td></tr>
</tbody></table>
<p>legend:<br />
‚ö¨ - not applicable<br />
‚úÖ - implemented<br />
üìö - implementation provided in libcore<br />
‚ùå - not implemented</p>
<p>‚ùå after a type name means that type is not yet in chalk</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        
                            <a rel="prev" href="../clauses/opaque_types.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                        

                        
                            <a rel="next" href="../clauses/wf.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                
                    <a rel="prev" href="../clauses/opaque_types.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                

                
                    <a rel="next" href="../clauses/wf.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
                
            </nav>

        </div>

        

        

        

        
        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        

        

        
        <script src="../elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../searcher.js" type="text/javascript" charset="utf-8"></script>
        

        <script src="../clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="../book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        
        <script type="text/javascript" src="../mermaid.min.js"></script>
        
        <script type="text/javascript" src="../mermaid-init.js"></script>
        

        

    </body>
</html>
